<table *ngIf="isConnected && !loading && formations.length" class="admin-table">
    <thead>
        <tr>
            <th>Titre</th>
            <th>Description</th>
            <th>Prix</th>
            <th>Catégorie</th>
            <th>Date début</th>
            <th>Date fin</th>
            <th>Image</th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        <tr *ngFor="let f of formations">
            <td>{{ f.titre }}</td>

            <!-- Description tronquée -->
            <td>
                <span *ngIf="!f.showFullDescription">
                    {{ f.description?.slice(0, 80) || 'Pas de description' }}
                    <span *ngIf="f.description && f.description.length > 80">...</span>
                    <button class="btn-voir-plus" *ngIf="f.description && f.description.length > 80"
                        (click)="f.showFullDescription = true">
                        Voir plus
                    </button>
                </span>
            
                <span *ngIf="f.showFullDescription">
                    {{ f.description }}
                    <button class="btn-voir-moins" (click)="f.showFullDescription = false">
                        Voir moins
                    </button>
                </span>
            </td>


            <td>{{ f.prix }} FCFA</td>
            <td>{{ f.categorie || 'Non spécifiée' }}</td>
            <td>{{ f.dateDebut | date:'dd/MM/yyyy' }}</td>
            <td>{{ f.dateFin | date:'dd/MM/yyyy' }}</td>

            <td>
                <img *ngIf="f.image" [src]="f.image" alt="{{ f.titre }}" width="60" />
            </td>

            <td class="actions">
                <button class="btn-modifier" (click)="modifierFormation(f._id)">Modifier</button>
                <button class="btn-supprimer" (click)="supprimerFormation(f._id)">Supprimer</button>
                <button class="btn-voir" (click)="openFormationDetail(f._id)">Voir</button>
            </td>
        </tr>
    </tbody>
</table>
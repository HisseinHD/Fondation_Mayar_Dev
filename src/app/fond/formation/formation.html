<div class="formations-container">
    <h2>Liste des Formations</h2>

    <div *ngIf="loading" class="loading">Chargement...</div>
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

    <!-- Tableau pour admin connecté -->
    <table *ngIf="isConnected && !loading && formations.length" class="admin-table">
        <thead>
            <tr>
                <th>Titre</th>
                <th>Description</th>
                <th>Prix</th>
                <th>Catégorie</th>
                <th>Date début</th>
                <th>Date fin</th>
                <th>Image</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let f of formations">
                <td>{{ f.titre }}</td>
                <td>{{ f.description || 'Pas de description' }}</td>
                <td>{{ f.prix }} FCFA</td>
                <td>{{ f.categorie || 'Non spécifiée' }}</td>
                <td>{{ f.dateDebut | date:'dd/MM/yyyy' }}</td>
                <td>{{ f.dateFin | date:'dd/MM/yyyy' }}</td>
                <td>
                    <img *ngIf="f.image" [src]="f.image" alt="{{ f.titre }}" width="60" />
                </td>

                <td class="actions">
                    <button class="btn-modifier" (click)="modifierFormation(f._id)">Modifier</button>
                    <button class="btn-supprimer" (click)="supprimerFormation(f._id)">Supprimer</button>
                    <button class="btn-voir" (click)="openFormationDetail(f._id)">Voir</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Cartes pour visiteurs non connectés -->
    <div *ngIf="!isConnected && !loading && formations.length" class="grid">
        <div *ngFor="let f of formations" class="card">
            <img *ngIf="f.image" [src]="f.image" alt="{{ f.titre }}" />
            <h3>{{ f.titre }}</h3>
            <p>{{ f.description || 'Pas de description disponible' }}</p>
            <p><strong>Prix :</strong> {{ f.prix }} FCFA</p>
            <p><strong>Catégorie :</strong> {{ f.categorie || 'Non spécifiée' }}</p>

            <p *ngIf="f.dateDebut"><strong>Date de début :</strong> {{ f.dateDebut | date:'dd/MM/yyyy' }}</p>
            <p *ngIf="f.dateFin"><strong>Date de fin :</strong> {{ f.dateFin | date:'dd/MM/yyyy' }}</p>

            <div class="actions">
                <button class="btn-inscrire" (click)="ouvrirFormulaireInscription(f._id)">S’inscrire</button>
            </div>
        </div>
    </div>

    <!-- Message si aucune formation -->
    <div *ngIf="!loading && !formations.length" class="no-data">
        Aucune formation disponible.
    </div>
</div>
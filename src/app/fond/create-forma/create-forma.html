<form [formGroup]="formationForm" (ngSubmit)="onSubmit()" class="form-container">
    <h2>Cr√©er une formation</h2>

    <!-- üü¶ TITRE -->
    <div class="form-group">
        <label>Titre *</label>
        <input formControlName="titre" type="text" />
        <small *ngIf="f['titre'].touched && f['titre'].invalid">
            <ng-container *ngIf="f['titre'].errors?.['required']">
                Le titre est obligatoire.
            </ng-container>
            <ng-container *ngIf="f['titre'].errors?.['minlength']">
                Le titre doit contenir au moins 3 caract√®res.
            </ng-container>
        </small>
    </div>

    <!-- üü© CAT√âGORIE -->
    <div class="form-group">
        <label>Cat√©gorie *</label>
        <select formControlName="categorie">
            <option value="">-- S√©lectionner une cat√©gorie --</option>
            <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
        <small *ngIf="f['categorie'].touched && f['categorie'].invalid">
            Cat√©gorie requise.
        </small>
    </div>

    <!-- üü® PRIX -->
    <div class="form-group">
        <label>Prix (FCFA) *</label>
        <input formControlName="prix" type="number" />
        <small *ngIf="f['prix'].touched && f['prix'].invalid">
            <ng-container *ngIf="f['prix'].errors?.['required']">
                Le prix est obligatoire.
            </ng-container>
            <ng-container *ngIf="f['prix'].errors?.['min']">
                Le prix doit √™tre ‚â• 0.
            </ng-container>
        </small>
    </div>

    <!-- üüß NOMBRE DE PLACES -->
    <div class="form-group">
        <label>Nombre de places *</label>
        <input formControlName="places" type="number" />
        <small *ngIf="f['places'].touched && f['places'].invalid">
            <ng-container *ngIf="f['places'].errors?.['required']">
                Le nombre de places est obligatoire.
            </ng-container>
            <ng-container *ngIf="f['places'].errors?.['min']">
                Au moins 1 place requise.
            </ng-container>
        </small>
    </div>

    <!-- üóìÔ∏è DATES -->
    <div class="form-group">
        <label>Date de d√©but *</label>
        <input formControlName="dateDebut" type="date" />
    </div>

    <div class="form-group">
        <label>Date de fin *</label>
        <input formControlName="dateFin" type="date" />
        <small *ngIf="formationForm.hasError('invalidDateRange')">
            La date de fin doit √™tre apr√®s la date de d√©but.
        </small>
    </div>

    <!-- üìù DESCRIPTION -->
    <div class="form-group">
        <label>Description *</label>
        <textarea formControlName="description"></textarea>
        <small *ngIf="f['description'].touched && f['description'].invalid">
            <ng-container *ngIf="f['description'].errors?.['required']">
                La description est obligatoire.
            </ng-container>
            <ng-container *ngIf="f['description'].errors?.['minlength']">
                La description doit comporter au moins 10 caract√®res.
            </ng-container>
        </small>
    </div>

    <!-- üñºÔ∏è IMAGE -->
    <div class="form-group">
        <label>Image *</label>
        <input type="file" accept="image/*" (change)="onFileSelected($event)" />
        <img *ngIf="imagePreview" [src]="imagePreview" alt="Aper√ßu" class="preview" />
    </div>

    <!-- üîò BOUTON -->
    <button type="submit" [disabled]="isLoading">
        {{ isLoading ? 'Cr√©ation...' : 'Cr√©er la formation' }}
    </button>
</form>

<!-- üü¢ MODALE -->
<div class="modal" *ngIf="showModal">
    <div class="modal-content" [ngClass]="{
      success: modalType === 'success',
      error: modalType === 'error',
      loading: modalType === 'loading'
    }">
        <div *ngIf="modalType === 'loading'" class="spinner"></div>
        <p>{{ modalMessage }}</p>
    </div>
</div>
<div class="liste-inscrits-container">
    <h2>Liste des inscrits</h2>

    <div *ngIf="loading" class="loading">
        <i class="fas fa-spinner"></i> Chargement...
    </div>

    <div *ngIf="errorMessage" class="error">
        <i class="fas fa-exclamation-triangle"></i> {{ errorMessage }}
    </div>

    <table *ngIf="!loading && candidats.length > 0">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Email</th>
                <th>Téléphone</th>
                <th>Niveau</th>
                <th>Date inscription</th>
                <th>Action</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let c of candidats">
                <td data-label="Nom">{{ c.nom }}</td>
                <td data-label="Prénom">{{ c.prenom }}</td>
                <td data-label="Email">{{ c.email }}</td>
                <td data-label="Téléphone">{{ c.tel }}</td>
                <td data-label="Niveau">{{ c.niveau || 'Non spécifié' }}</td>
                <td data-label="Date inscription">{{ c.dateInscription | date:'short' }}</td>
                <td data-label="Action">
                    <div class="action-buttons">
                        <button (click)="modifierStatut(c, 'validé')" class="btn-valider">Valider</button>
                        <button (click)="modifierStatut(c, 'refusé')" class="btn-refuser">Refuser</button>
                        <button (click)="supprimerCandidat(c._id)" class="btn-supprimer">Supprimer</button>
                    </div>
                </td>
                <td data-label="Status">
                    <select [(ngModel)]="c.statut" (change)="modifierStatut(c, c.statut!)"
                        [class]="'statut-select statut-' + c.statut">
                        <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
                    </select>
                </td>
            </tr>
        </tbody>
    </table>

    <p *ngIf="!loading && candidats.length === 0" class="no-data">
        <i class="fas fa-inbox"></i> Aucun inscrit pour cette formation.
    </p>
</div>